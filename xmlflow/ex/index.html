<html>
    <head>
        <link rel="stylesheet" href="https://cdn.rawgit.com/mmaltsev/Xml2Tree/master/src/css/style.css">
        <script src="https://cdn.rawgit.com/mmaltsev/Xml2Tree/master/src/xml2tree_d3.min.js"></script>
    </head>
    <body>
        <div id="xml">

<!-- XML BEGIN -->
<xmlflow id="full-xml-load-nodes-and-svg">
    <data-stream-full-xml>
        <B1></B1>
        <xml2xdomNds>
            <xdomXroot>
                <xdom2nds>
                    <ndsSetMouseRects>
                        <A1/>
                    </ndsSetMouseRects>
                </xdom2nds>
            </xdomXroot>
        </xml2xdomNds>
    </data-stream-full-xml>
    <data-stream-nodes>
        <A2></A2>
    </data-stream-nodes>
    <dom-stream-svg>
        <B2></B2>
    </dom-stream-svg>
    <A>
        <data-load-nodes/>
    </A>
    <B>
        <dom-load-svg/>
    </B>
</xmlflow>
<!-- XML END -->

        </div>
        <div id="chart1"></div>
        <script>
            window.readTextFile = function(file) { return `<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>${document.getElementById('xml').innerHTML}`; }
            xml2tree("chart1", "file.js", [], false, false);
            let interval = setInterval(() => {
                let count = 0;
                
                [...document.getElementsByClassName("node")].forEach((nd) => {
                    if (window.getComputedStyle(nd.querySelectorAll('circle')[0]).fill !== 'rgb(255, 255, 255)') {
                        nd.dispatchEvent(new Event("click"));
                        count += 1;
                    }
                });
                if (count == 0) clearInterval(interval);
            }, 1500);
        </script>

    </body>
</html>
